# Copyright (c) 2021-2025 HPMicro
# SPDX-License-Identifier: BSD-3-Clause

if("${HPM_BUILD_TYPE}" STREQUAL "flash_xip")
    set(CONFIG_USER_FLASH_XIP 1)
endif()

if("${HPM_BUILD_TYPE}" STREQUAL "flash_sdram_xip")
    set(CONFIG_USER_FLASH_SDRAM_XIP 1)
endif()

if("${HPM_BUILD_TYPE}" STREQUAL "flash_hybrid_xip")
    set(CONFIG_USER_FLASH_HYBRID_XIP 1)
endif()

if("${HPM_BUILD_TYPE}" STREQUAL "ram")
    set(CONFIG_USE_RAM_TYPE 1 PARENT_SCOPE)
endif()

string(FIND ${BOARD} "67" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6750/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()

endif()

string(FIND ${BOARD} "63" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6360/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()
endif()

string(FIND ${BOARD} "62" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6280/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()

endif()

string(FIND ${BOARD} "53" found)
if(${found} GREATER_EQUAL 0)

    set(CONFIG_USE_FLASH_1M 1 PARENT_SCOPE)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5361/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5361/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5361/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5361/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()
endif()

string(FIND ${BOARD} "68" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6880/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()
endif()

string(FIND ${BOARD} "6e" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6E80/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()
endif()

string(FIND ${BOARD} "5e" found)
if(${found} GREATER_EQUAL 0)

    set(CONFIG_USE_FLASH_1M 1 PARENT_SCOPE)
    set(CONFIG_MBEDTLS 1 PARENT_SCOPE)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_HYBRID_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/gcc/user_app_flash_xip_hybrid.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/gcc/user_app_flash_xip_hybrid.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/segger/user_app_flash_xip_hybrid.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM5E31/iar/user_app_flash_xip_hybrid.icf PARENT_SCOPE)
        endif()
    endif()
endif()

string(FIND ${BOARD} "6p" found)
if(${found} GREATER_EQUAL 0)

    if(DEFINED CONFIG_USER_FLASH_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/gcc/user_app_flash_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/segger/user_app_flash_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/iar/user_app_flash_xip.icf PARENT_SCOPE)
        endif()
    endif()

    if(DEFINED CONFIG_USER_FLASH_SDRAM_XIP)
        if(DEFINED SES_TOOLCHAIN_VARIANT)
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        else()
        set(CUSTOM_GCC_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/gcc/user_app_flash_sdram_xip.ld PARENT_SCOPE)
        set(CUSTOM_SES_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/segger/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        set(CUSTOM_IAR_LINKER_FILE ${CMAKE_CURRENT_SOURCE_DIR}/HPM6P81/iar/user_app_flash_sdram_xip.icf PARENT_SCOPE)
        endif()
    endif()
endif()
